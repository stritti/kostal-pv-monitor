<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Power Monitor for Kostal Plenticore Converter | Kostal PV Monitor</title><meta name="description" content="ESP32 based device that can be used to monitor the power usage of a Kostal Plenticore converter">
    <link rel="modulepreload" href="/kostal-pv-monitor/assets/app.37ad2515.js"><link rel="modulepreload" href="/kostal-pv-monitor/assets/index.html.a5f06a33.js"><link rel="modulepreload" href="/kostal-pv-monitor/assets/index.html.f47b2be5.js"><link rel="modulepreload" href="/kostal-pv-monitor/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/kostal-pv-monitor/assets/style.e55edd98.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a aria-current="page" href="/kostal-pv-monitor/" class="router-link-active router-link-exact-active"><!----><span class="site-name">Kostal PV Monitor</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a aria-current="page" href="/kostal-pv-monitor/" class="router-link-active router-link-exact-active" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/stritti/kostal-pv-monitor" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a aria-current="page" href="/kostal-pv-monitor/" class="router-link-active router-link-exact-active" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/stritti/kostal-pv-monitor" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="home"><header class="hero"><img src="/kostal-pv-monitor/img/kostal-pv-monitor.jpg" alt="Kostal PV Monitor"><h1 id="main-title">Kostal PV Monitor</h1><p class="description">ESP32 based Device to monitor Power Consumption of Kostal Plenticore Converters</p><!----></header><div class="features"><!--[--><div class="feature"><h2>ESP32 based E-Ink Device</h2><p>2,13&quot; E-Ink Display with 128x64 pixel resolution showing data with very low energy consumption.</p></div><div class="feature"><h2>Easy Power Monitoring</h2><p>The device is powered by a LiPo battery and could be placed anywhere. Data is transfered using WiFi.</p></div><div class="feature"><h2>Modbus</h2><p>Communication is based on official Kostal Plenticore Modbus protocol to load data from Converter.</p></div><!--]--></div><div class="theme-default-content custom"><!--[--><h1 id="power-monitor-for-kostal-plenticore-converter" tabindex="-1"><a class="header-anchor" href="#power-monitor-for-kostal-plenticore-converter" aria-hidden="true">#</a> Power Monitor for Kostal Plenticore Converter</h1><p>This gadget is designed to show the power usage of a Kostal Plenticore Converter having attached solar cells and buffer battery.</p><p>Data is transfered using WiFi and read from Kostal Plenticore Converter using Modbus protocol.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>This is a private project and not officially supported by <a href="https://www.kostal-solar-electric.com/" target="_blank" rel="noopener noreferrer">Kostal Solar Electric<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></div><p><img src="/kostal-pv-monitor/img/kostal-pv-monitor-display.jpg" alt="Display of Kostal Plenticore PV Monitor"></p><p>It displays current power generation and consumption:</p><ul><li>PV production [W]</li><li>Battery charge/discharge [W] and SoC of battery [%]</li><li>House consumption [W]</li><li>Grid consumption/generation [W]</li><li>Time of last query</li></ul><p>To get fast insight on power consumtion of the house, the device shows smiley depending on primary energy source:</p><ul><li>battery: üôÇ</li><li>PV: üòé</li><li>grid:üôÅ</li></ul><h2 id="setup" tabindex="-1"><a class="header-anchor" href="#setup" aria-hidden="true">#</a> Setup</h2><p>First of all, please verify if Modbus is activated at your converter:</p><ul><li>Navigate within menu of converter: <code>Settings</code> -&gt; <code>Modbus/Sunspec</code></li><li>Pay attention that Modbus is <strong>activated</strong>.</li></ul><p><img src="/kostal-pv-monitor/img/modbus-settings.png" alt="Modbus settings"></p><h3 id="assemble-device" tabindex="-1"><a class="header-anchor" href="#assemble-device" aria-hidden="true">#</a> Assemble Device</h3><ol><li>Upload firmware</li><li>Connect battery</li><li>Fit to enclosure</li></ol><h3 id="initial-start" tabindex="-1"><a class="header-anchor" href="#initial-start" aria-hidden="true">#</a> Initial Start</h3><img src="/kostal-pv-monitor/img/kostal-pv-monitor-settings.jpg" alt="Kostal PV Monitor Settings" width="300" align="right"><p>If you start the device firsst time, it showsinformation to conect to its own WiFi hotspot. The Device runs in AP mode.</p><p>Take for example your smartphone and connect to shown WiFi hotspot.</p><p>In upcoming screen of the hotspot you are able to select Wifi network and password to attach the device to your home network. You have also to add hostname and port of your converter.</p><p>After all values are added, press <code>Save</code> button to store the values permanently on the device.</p><p>Now you could <strong>restart device</strong> and it will connect to your selected home network and can be used to monitor power consumption.</p><h4 id="required-settings" tabindex="-1"><a class="header-anchor" href="#required-settings" aria-hidden="true">#</a> Required Settings</h4><ul><li><p><code>WiFi SSID</code>: SSID/Name of your WiFi network</p></li><li><p><code>WiFi password</code>: Password of your WiFi network</p></li><li><p><code>Kostal Hostname</code>: Hostname of your Kostal Plenticore Converter</p></li><li><p><code>Kostal Modbus Port</code>: Port of your Kostal Plenticore Converter (default: 1502)</p></li></ul><h2 id="development" tabindex="-1"><a class="header-anchor" href="#development" aria-hidden="true">#</a> Development</h2><h3 id="parts-list-bom" tabindex="-1"><a class="header-anchor" href="#parts-list-bom" aria-hidden="true">#</a> Parts List (BOM)</h3><ul><li>1 <a href="https://banggood.onelink.me/zMT7/f5eac6bc" target="_blank" rel="noopener noreferrer">LILYGO¬Æ TTGO T5 V2.0 e-Paper Display Development Board<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>1 <a href="https://www.thingiverse.com/thing:4055993" target="_blank" rel="noopener noreferrer">TTGO T5 2.13&quot; ePaper Snap Fit Enclosure<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: Could be printed at <a href="https://craftcloud3d.com/" target="_blank" rel="noopener noreferrer">Craftcloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> using white ABS material.</li><li>3.7 V LiPo Battery</li></ul><h3 id="ttgo-t5-v2-0-e-paper-display-development-board" tabindex="-1"><a class="header-anchor" href="#ttgo-t5-v2-0-e-paper-display-development-board" aria-hidden="true">#</a> TTGO T5 V2.0 e-Paper Display Development Board</h3><p>More information about the board could be found at: <a href="https://github.com/Xinyuan-LilyGO/T5-Ink-Screen-Series" target="_blank" rel="noopener noreferrer">GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="modbus" tabindex="-1"><a class="header-anchor" href="#modbus" aria-hidden="true">#</a> Modbus</h3><p>Communication is based on <a href="https://www.kostal-solar-electric.com/de-de/download/-/media/document-library-folder---kse/2020/12/15/13/38/ba_kostal-interface-description-modbus-tcp_sunspec_hybrid.pdf/" target="_blank" rel="noopener noreferrer">Kostal Plenticore Modbus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="credits" tabindex="-1"><a class="header-anchor" href="#credits" aria-hidden="true">#</a> Credits</h2><h3 id="dfrobot" tabindex="-1"><a class="header-anchor" href="#dfrobot" aria-hidden="true">#</a> DFRobot</h3><p>Project was initiated on <a href="https://community.dfrobot.com/makelog-312165.html" target="_blank" rel="noopener noreferrer">2022 ESP32 Initiation Program: &quot;Micro-Control&quot; Your World<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. Many thanks to <a href="https://www.dfrobot.com/index.html" target="_blank" rel="noopener noreferrer">DFRobot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for the support.</p><img src="/kostal-pv-monitor/img/kostal-pv-monitor-096-oled.jpg" alt="First version using Monochrome 0.96 128x64 I2C/SPI OLED Display" width="300" align="right"><p>First version was based on:</p><ul><li><a href="https://www.dfrobot.com/product-2017.html" target="_blank" rel="noopener noreferrer">DFRobot Monochrome 0.96&quot; 128x64 I2C/SPI OLED Display<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.dfrobot.com/product-2395.html" target="_blank" rel="noopener noreferrer">DFRobot Gravity: IO Shield for FireBeetle M0 and ESP32-E<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.dfrobot.com/product-2231.html" target="_blank" rel="noopener noreferrer">DFRobot FireBeetle ESP32-E IoT Microcontroller with Header<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>The version showed the following data:</p><ul><li>Battery SoC (0-100%)</li><li>Own home consumption from PV (W)</li><li>Own home consumption from grid (W)</li><li>Own home consumption from battery (W)</li><li>Smiley depending on primary energy source</li></ul><h2 id="license" tabindex="-1"><a class="header-anchor" href="#license" aria-hidden="true">#</a> License</h2><p>This project is licensed under the <a href="https://github.com/stritti/kostal-pv-monitor/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">MIT License<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><!--]--></div><!--[--><div class="footer"><div>MIT Licensed | Copyright 2022-present | <a href="https://twitter.com/_stritti_">Stephan Strittmatter</a></div></div><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/kostal-pv-monitor/assets/app.37ad2515.js" defer></script>
  </body>
</html>
